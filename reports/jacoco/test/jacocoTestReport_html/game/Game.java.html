<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="it"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>Game.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">dama</a> &gt; <a href="index.source.html" class="el_package">game</a> &gt; <span class="el_source">Game.java</span></div><h1>Game.java</h1><pre class="source lang-java linenums">package game;

import java.util.ArrayList;
import java.util.Scanner;

import gametable.GameCheckersTable;
import player.Player;
/**
 * 
 * &lt;&lt;Entity&gt;&gt;
 * Restituisce i giocatori Bianco e Nero e il giocatore corrente.
 * Contiene i metodi get e set per l'attributo inGame che controlla
 * la presenza di una partita in corso.
 * Infine, gestisce i turni.
 *
 */
public class Game {
	private static final char WHITE_COLOR = 'w';
	private static final char BLACK_COLOR = 'b';

	private Player player1;
	private Player player2;
	private Player currentPlayer;
	private boolean inGame;

<span class="fc" id="L26">	public Game() {</span>
<span class="fc" id="L27">		this.currentPlayer = null;</span>
<span class="fc" id="L28">		this.player1 = new Player(WHITE_COLOR);</span>
<span class="fc" id="L29">		this.player2 = new Player(BLACK_COLOR);</span>
<span class="fc" id="L30">		inGame = false;</span>
<span class="fc" id="L31">	}</span>
	public static void startNewGame(final Game currentGame) {
<span class="pc bpc" id="L33" title="1 of 2 branches missed.">		if (!currentGame.getInGame()) {</span>
<span class="fc" id="L34">			currentGame.setInGame();</span>
<span class="fc" id="L35">			System.out.println(&quot;Partita iniziata!&quot;);</span>
<span class="fc" id="L36">			System.out.println(&quot;Il Bianco muove per primo&quot;);</span>
			} else {
<span class="nc" id="L38">			System.out.println(&quot;Sei gia in partita!&quot;);</span>
		}

<span class="fc" id="L41">	}</span>
	public static void endGame(final Game currentGame, final GameCheckersTable currentTable,
			final Scanner scan, String comando) {

<span class="nc bnc" id="L45" title="All 2 branches missed.">		if (currentGame.getInGame()) {</span>
<span class="nc" id="L46">			System.out.println(&quot;Sei sicuro di voler abbandonare? [S/N]&quot;);</span>
<span class="nc" id="L47">			comando = scan.nextLine();</span>
<span class="nc" id="L48">            comando = comando.toLowerCase();</span>

<span class="nc bnc" id="L50" title="All 8 branches missed.">    		if (comando.equals(&quot;s&quot;) || comando.equals(&quot;si&quot;) || comando.equals(&quot;y&quot;) || comando.equals(&quot;yes&quot;)) {</span>
<span class="nc bnc" id="L51" title="All 2 branches missed.">    			if (currentGame.getCurrentPlayer().getColor() == WHITE_COLOR) {</span>
<span class="nc" id="L52">    				System.out.println(&quot;Vittoria del Nero per abbandono!&quot;);</span>
<span class="nc" id="L53">        			System.out.println(&quot;Partita abbandonata!&quot;);</span>
    			} else {
<span class="nc" id="L55">    				System.out.println(&quot;Vittoria del Bianco per abbandono!&quot;);</span>
<span class="nc" id="L56">        			System.out.println(&quot;Partita abbandonata!&quot;);</span>
    			}
<span class="nc" id="L58">    			currentGame.getPlayer1().getMoves().clear();</span>
<span class="nc" id="L59">    			currentGame.getPlayer2().getMoves().clear();</span>
<span class="nc" id="L60">                currentGame.setInGame();</span>
<span class="nc" id="L61">                currentTable.resetTable();</span>
    		} else {
<span class="nc" id="L63">    			System.out.println(&quot;Non mollare!&quot;);</span>
<span class="nc" id="L64">    			return;</span>
    		}
		} else {
<span class="nc" id="L67">				System.out.println(&quot;Nessuna partita in corso!&quot;);</span>
<span class="nc" id="L68">				System.out.println(&quot;Digita 'gioca' per iniziare una nuova partita.&quot;);</span>
			}
<span class="nc" id="L70">	}</span>


	public final boolean getInGame() {
<span class="fc" id="L74">		return inGame;</span>
	}

	public final void setInGame() {
<span class="pc bpc" id="L78" title="1 of 2 branches missed.">		inGame = !inGame;</span>

<span class="pc bpc" id="L80" title="1 of 2 branches missed.">		if (inGame) {</span>
<span class="fc" id="L81">			startPlayer1Turn();</span>
		}
<span class="fc" id="L83">	}</span>

	public final Player getPlayer1() {

<span class="nc" id="L87">		return player1;</span>
	}

	public final Player getPlayer2() {

<span class="nc" id="L92">		return player2;</span>
	}

    public final Player getCurrentPlayer() {

<span class="fc" id="L97">        return currentPlayer;</span>
    }

	public final void startPlayer1Turn() {

<span class="fc bfc" id="L102" title="All 2 branches covered.">		if (currentPlayer != null) {</span>
<span class="fc" id="L103">			player2.pauseTimer();</span>
        }
<span class="fc" id="L105">        player1.startTimer();</span>

<span class="fc" id="L107">		currentPlayer = player1;</span>
<span class="fc" id="L108">	}</span>

	public final void startPlayer2Turn() {

<span class="fc" id="L112">		player1.pauseTimer();</span>
<span class="fc" id="L113">        player2.startTimer();</span>

<span class="fc" id="L115">		currentPlayer = player2;</span>
<span class="fc" id="L116">	}</span>
	public final void switchTurn() {

<span class="fc bfc" id="L119" title="All 2 branches covered.">		if (currentPlayer == null) {</span>

<span class="fc" id="L121">			startPlayer1Turn();</span>
<span class="fc" id="L122">            System.out.println(&quot;Turno del bianco&quot;);</span>
<span class="fc bfc" id="L123" title="All 2 branches covered.">        } else if (currentPlayer == player1) {</span>

<span class="fc" id="L125">			startPlayer2Turn();</span>
<span class="fc" id="L126">			player2.reStartTimer();</span>
<span class="fc" id="L127">            System.out.println(&quot;Turno del nero&quot;);</span>
		} else {

<span class="fc" id="L130">			startPlayer1Turn();</span>
<span class="fc" id="L131">			player1.reStartTimer();</span>
<span class="fc" id="L132">            System.out.println(&quot;Turno del bianco&quot;);</span>
		}
<span class="fc" id="L134">    }</span>

	public final char getCurrentPlayerColor() {
<span class="fc" id="L137">		return currentPlayer.getColor();</span>
	}
	public static void showMovements(final Player white, final Player black) {
<span class="nc" id="L140">	    ArrayList&lt;String&gt; whiteMoves = new ArrayList&lt;String&gt;();</span>
<span class="nc" id="L141">	    whiteMoves = white.getMoves();</span>
<span class="nc" id="L142">	    ArrayList&lt;String&gt; blackMoves = 	new ArrayList&lt;String&gt;();</span>
<span class="nc" id="L143">	    blackMoves = black.getMoves();</span>
<span class="nc" id="L144">    	int arrayLength = whiteMoves.size() + blackMoves.size();</span>

    	try {
<span class="nc bnc" id="L147" title="All 2 branches missed.">	   	for (int i = 0; i &lt; arrayLength; i++)	{</span>
<span class="nc" id="L148">	   	System.out.println(&quot;B: &quot; + whiteMoves.get(i));</span>
<span class="nc" id="L149">	   	System.out.println(&quot;N: &quot; + blackMoves.get(i));</span>
	   	}
<span class="nc" id="L151">		} catch (IndexOutOfBoundsException exception) {</span>
<span class="nc" id="L152">			System.out.println(&quot;&quot;);</span>
<span class="nc" id="L153">		}</span>
<span class="nc" id="L154">	}</span>
	public static char getBlackColor() {
<span class="fc" id="L156">		return BLACK_COLOR;</span>
	}
	public static char getWhiteColor() {
<span class="fc" id="L159">		return WHITE_COLOR;</span>
	}
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.5.201910111838</span></div></body></html>